$(document).ready(function() {
  function getFormData($form) {
    var unindexed_array = $form.serializeArray();
    var indexed_array = {};

    $.map(unindexed_array, function(n, i) {
      indexed_array[n["name"]] = n["value"];
    });

    return indexed_array;
  }

  function registerFormAjax(event, data) {
    event.preventDefault();
    $.ajax({
      type: "POST",
      url: "/signup/",
      data: data,
      success: function(prod_detail) {
        setTimeout(function() {
          var data = prod_detail;
          alert(data);
          window.location.reload();
        }, 500);
      }
    });
  }

  $("#placement_position").change(function() {
    if ($(this).val() == "R") {
      $("#placement_id_right").css("display", "block");
      $("#placement_id_left").css("display", "none");
    } else {
      $("#placement_id_right").css("display", "none");
      $("#placement_id_left").css("display", "block");
    }
  });

  $("input,select,textarea")
    .not("[type=submit]")
    .jqBootstrapValidation({
      submitSuccess: function($form, event) {
        var formId = $form.attr("id");
        if (formId == "registerForm") {
          var data = getFormData($form);
          registerFormAjax(event, data);
        }
      }
    });
});
