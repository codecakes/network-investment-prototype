{% extends "base.html" %}

{% load staticfiles %}

{% block content %}

<div class="content-header"></div>

<div class="content-body">
    <section id="profile-form">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title" id="horz-layout-basic">Profile</h4>
                    </div>
                    <div class="card-body collapse in">
                        <div class="card-block">
                            <form id="profile_form" class="form form-horizontal">
                                <div class="form-body">
                                    <h4 class="form-section"><i class="icon-head"></i> Network Detail</h4>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="projectinput1">Sponsor ID</label>
                                        <div class="col-md-9">
                                            {{user.profile.sponser_id}}
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="projectinput2">Placement ID</label>
                                        <div class="col-md-9">
                                            {{user.profile.placement_id}}
                                        </div>
                                    </div>
    
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="projectinput3">Position of placement</label>
                                        <div class="col-md-9">
                                            {{user.profile.placement_position}}
                                        </div>
                                    </div>

                                    <h4 class="form-section"><i class="icon-clipboard4"></i> Personal Detail</h4>
    
                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="first_name">*First Name</label>
                                        <div class="col-md-9">
                                            <input type="text" id="first_name" class="form-control" placeholder="First Name" name="first_name" value="{{user.first_name}}" required>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="last_name">*Last Name</label>
                                        <div class="col-md-9">
                                            <input type="text" id="last_name" class="form-control" placeholder="Last Name" name="last_name" value="{{user.last_name}}" required>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="last_name">Email</label>
                                        <div class="col-md-9">
                                            {{user.email}}
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="last_name">Mobile</label>
                                        <div class="col-md-9">
                                            {{user.profile.mobile}}
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control" for="last_name">Country</label>
                                        <div class="col-md-9">
                                            <select name="country" id="country" class="form-control">
                                                {% for country in countries %}
                                                    <option {% if user.profile.country == country.country_code %}selected{% endif %} data-code="{{country.dialling_code}}" value="{{country.country_code}}">{{country.country_name}}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control">Bitcoin Address</label>
                                       <div class="col-md-9">
                                            <input type="text" id="btc_address" class="form-control" placeholder="First Name" name="btc_address" value="{{user.btc_address}}" required>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control">Ripple Address</label>
                                       <div class="col-md-9">
                                            <input type="text" id="xrp_address" class="form-control" placeholder="First Name" name="xrp_address" value="{{user.xrp_address}}" required>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control">Etherum Address</label>
                                       <div class="col-md-9">
                                            <input type="text" id="xrp_address" class="form-control" placeholder="First Name" name="xrp_address" value="{{user.xrp_address}}" required>
                                        </div>
                                    </div>

                                    <div class="form-group row">
                                        <label class="col-md-3 label-control">Destination Tag</label>
                                       <div class="col-md-9">
                                            <input type="text" id="destination_tag" class="form-control" placeholder="First Name" name="destination_tag" value="{{user.destination_tag}}" required>
                                        </div>
                                    </div>
                                </div>
    
                                <div class="form-actions">
                                    <button id="profile_update" type="submit" class="btn btn-primary">
                                        <i class="icon-check2"></i> Save
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block page_javascript %}
<script type="text/javascript">
    $('#profile_form').submit(function(event) {
        event.preventDefault()
        var data = {
            "first_name": $("#first_name").val(),
            "last_name": $("#last_name").val(),
            "country": $("#country").val()
        }

        $.ajax({
            type:"POST",
            url:"/profile",
            dataType: 'json',
            data: data,
            success: function(data) {
                toastr.success("update", "Profile updated.")
            }
        });
    });
</script>
{% endblock %}